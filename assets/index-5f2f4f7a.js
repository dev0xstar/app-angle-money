import{C as _,u as j,k as C,j as d,bs as P,r as T,bt as S,a0 as L,h as u,m as G,B as R}from"./index-6c9a656c.js";import{a2 as O,a3 as M,ac as q,f as l,I as n}from"./react-ac02b43c.js";import{H as b,a as z,G as B,I as v}from"./priceReference-015357d4.js";import{h as D}from"./style-053d0d8d.js";import{b as V,a as U}from"./PageHeader-912a2f98.js";import{T as A}from"./Collapsible-a64048f9.js";const ee=(a,p,t)=>{const i=[...a];return i[p]=t,i},ne=(a,p)=>[...a.slice(0,p),...a.slice(p+1)],_e=(a,p)=>{const t=[...a];return t.push(p),t},ae=a=>{const p=[...a];return p.pop(),p},pe=(a,p,t)=>t.indexOf(a)===p,Y="https://api.goldsky.com/api/public/project_cltpyx1eh5g5v01xi0a5h5xea/subgraphs/analytics-",$="https://api.goldsky.com/api/public/project_cltpyx1eh5g5v01xi0a5h5xea/subgraphs/analytics-";_.ARBITRUM,_.MAINNET,_.OPTIMISM,_.POLYGON,_.AVALANCHE,_.GNOSIS,_.BSC,_.CELO,_.BASE;const H={[_.ARBITRUM]:"arb",[_.MAINNET]:"eth",[_.OPTIMISM]:"opt",[_.POLYGON]:"pol",[_.AVALANCHE]:"ava",[_.GNOSIS]:"gno",[_.BSC]:"bnb",[_.CELO]:"cel",[_.BASE]:"base",[_.XLAYER]:"x1",[_.LINEA]:"lin"},se=a=>{const p={REACT_APP_PAGE:"",npm_package_dependencies__web3_onboard_walletconnect:"2.6.1",npm_package_devDependencies__types_node:"^16.7.10",npm_package_dependencies__vitejs_plugin_react:"^4.1.0",npm_package_dependencies__types_react_router:"^5.1.18",npm_package_dependencies__layerzerolabs_scan_client:"^0.0.0-beta.6",npm_package_devDependencies__types_qs:"^6.9.7",npm_package_dependencies_react_dnd_html5_backend:"^16.0.1",npm_package_dependencies_hex_to_rgba:"^2.0.1",npm_package_dependencies__web3_onboard_metamask:"2.1.2",npm_package_dependencies__svgr_rollup:"^8.1.0",npm_package_devDependencies_rc_pagination:"^4.0.4",npm_config_version_commit_hooks:"true",npm_config_user_agent:"yarn/1.22.22 npm/? node/v18.20.5 linux x64",npm_package_dependencies_graphql_request:"^4.3.0",npm_package_dependencies_glslCanvas:"^0.2.6",npm_package_dependencies__rollup_plugin_inject:"^5.0.5",npm_package_devDependencies_graphql:"^15.6.1",npm_package_devDependencies_copy_to_clipboard:"^3.2.0",npm_package_devDependencies_buffer:"^6.0.3",npm_config_bin_links:"true",npm_node_execpath:"/usr/local/bin/node",npm_package_scripts_deploy_preview:"chmod +x ./scripts/publishAndDeploy.sh && ./scripts/publishAndDeploy.sh",npm_package_devDependencies_vite_plugin_sass:"^0.1.0",npm_config_init_version:"1.0.0",npm_package_dependencies_keccak256:"^1.0.6",npm_package_dependencies__web3_onboard_gnosis:"^2.3.1",npm_package_dependencies__web3_onboard_core:"^2.22.2",REACT_APP_ANALYTICS_API:"https://exporter.angle.money",PORT:"3000",npm_package_browserslist_production_0:">0.2%",npm_package_dependencies_url:"^0.11.0",npm_package_dependencies__types_bun:"^1.1.3",npm_package_devDependencies_sass:"^1.69.5",npm_package_browserslist_production_1:"not dead",npm_package_scripts_notion:"node src/pages/blog/index.tsx",npm_package_dependencies_react_syntax_highlighter:"^15.5.0",npm_package_devDependencies_stream_browserify:"^3.0.0",npm_package_devDependencies_jazzicon:"^1.5.0",npm_package_devDependencies__mui_icons_material:"^5.5.1",npm_package_browserslist_production_2:"not op_mini all",npm_package_dependencies_framer_motion:"10.18.0",npm_package_devDependencies__emotion_styled:"^11.10.5",npm_config_init_license:"MIT",NODE_OPTIONS:"--max-old-space-size=8912",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies__biomejs_biome:"^1.8.1",npm_config_version_tag_prefix:"v",npm_package_scripts_serve:"bun run start.config.ts serve",npm_package_dependencies_react_icons:"^4.3.1",npm_package_devDependencies_util:"^0.12.4",npm_package_devDependencies_os_browserify:"^0.3.0",npm_package_dependencies_moment:"^2.29.4",npm_package_dependencies_dayjs:"^1.10.6",npm_package_devDependencies__pinata_sdk:"^1.1.26",npm_package_dependencies_apollo_cache_inmemory:"^1.6.6",npm_package_dependencies_antd:"^4.24.6",npm_package_dependencies__apollo_client:"^3.4.11",npm_package_devDependencies_typescript:"^5.2.2",npm_package_devDependencies_tailwindcss:"3.4.1",npm_package_description:"Angle DApp",npm_package_readmeFilename:"README.md",npm_package_scripts_check_format:"biome format ./src",npm_package_dependencies_jsbi:"^4.3.0",npm_package_dependencies_ipfs_http_client:"^60.0.1",npm_package_devDependencies_react:"^18.2.0",npm_package_devDependencies__types_react_dom:"18.0.8",npm_package_homepage:"http://.",npm_package_scripts_start_https:"HTTPS=true vite --open",npm_package_dependencies_react_dnd:"^16.0.1",npm_package_dependencies_numbro:"^2.3.6",npm_package_dependencies_echarts_for_react:"^3.0.2",npm_package_devDependencies_prettier:"^2.6.2",npm_package_devDependencies_i18next_fs_backend:"^2.3.0",npm_package_devDependencies__playwright_test:"^1.46.1",npm_package_dependencies_idb_keyval:"^6.2.1",npm_package_type:"module",npm_package_devDependencies_vite_plugin_node_polyfills:"^0.21.0",npm_package_devDependencies_node_sass:"^7.0.1",npm_package_devDependencies_autoprefixer:"^10.4.16",npm_package_private:"true",REACT_APP_MERKL_API:"https://api.merkl.xyz",npm_package_scripts_lint:"biome check --apply ./src",npm_package_devDependencies_postcss_import:"^14.0.2",npm_config_registry:"https://registry.yarnpkg.com",npm_package_dependencies_cli:"^1.0.1",npm_package_devDependencies_stream_http:"^3.2.0",npm_package_devDependencies_i18next_xhr_backend:"^3.2.2",npm_package_devDependencies__types_testing_library__cypress:"5.0.9",npm_package_scripts_start:"bun run start.config.ts start",npm_package_include_0:"src",npm_package_devDependencies_vite_bundle_visualizer:"^0.11.0",npm_package_devDependencies_react_parallax_tilt:"^1.7.81",npm_package_devDependencies_process:"^0.11.10",npm_config_ignore_scripts:"",npm_package_browserslist_development_0:"last 1 chrome version",npm_package_include_1:"types/svg.d.ts",npm_package_dependencies_recharts:"^2.1.16",npm_package_dependencies_axios:"^0.27.2",npm_package_dependencies__angleprotocol_sdk:"v2.33.16",npm_package_devDependencies_tsc_silent:"^1.2.2",npm_package_devDependencies_prettier_plugin_tailwindcss:"^0.1.10",npm_package_devDependencies_ethers:"^5.7.2",PATH:"/tmp/yarn--1732532640188-0.4297358547748935:/home/runner/work/app/app/node_modules/.bin:/home/runner/.config/yarn/link/node_modules/.bin:/usr/local/bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin",NODE:"/usr/local/bin/node",npm_package_browserslist_development_1:"last 1 firefox version",npm_package_dependencies_unimported:"^1.31.1",npm_package_name:"@angleprotocol/app",npm_package_browserslist_development_2:"last 1 safari version",npm_package_scripts_integration_test:"start-server-and-test 'serve build -l 3000' http://localhost:3000 'cypress run'",npm_package_scripts_analyze:"ANALYZE_BUNDLE=1 yarn build",npm_package_dependencies__safe_global_safe_apps_provider:"^0.18.0",npm_package_scripts_eject:"react-app-rewired eject",npm_package_dependencies_echarts:"^5.4.3",npm_package_dependencies_react_intersection_observer:"^9.5.3",npm_package_devDependencies_react_i18next:"^11.11.4",RAW:"",npm_package_dependencies_react_markdown:"^8.0.2",npm_package_devDependencies_rollup_plugin_auto_external:"^2.0.0",npm_package_devDependencies_node:"^21.1.0",npm_package_main:"src/entry.client.tsx",npm_package_scripts_test:"react-app-rewired test --env=jsdom",npm_package_dependencies_chalk:"^5.3.0",npm_package_devDependencies_react_scripts:"5.0.1",npm_package_devDependencies_react_router_dom:"^6.11.2",npm_package_devDependencies_react_latex:"^2.0.0",npm_package_devDependencies_qs:"^6.9.4",npm_package_devDependencies_i18next:"^21.2.0",npm_package_devDependencies_flat:"^5.0.2",npm_config_version_git_message:"v%s",npm_lifecycle_event:"vite",npm_package_version:"",npm_package_dependencies_unstorage:"^1.10.1",npm_package_dependencies__types_react_router_hash_link:"^2.4.5",npm_package_dependencies__shopify_react_web_worker:"^5.0.15",npm_package_dependencies__esbuild_plugins_node_globals_polyfill:"^0.2.3",npm_package_devDependencies_react_router_hash_link:"^2.4.3",npm_package_devDependencies_assert:"^2.0.0",npm_package_devDependencies__types_react:"^18.0.24",BUILD_DIRECTORY:"build",npm_config_argv:'{"remain":[],"cooked":["run","vite"],"original":["run","vite","build","--outDir","build"]}',npm_package_scripts_generate_types:"typechain --target ethers-v5 --out-dir src/constants/contracts 'src/constants/*.abi'",npm_package_scripts_build:"bun run start.config.ts build",npm_package_devDependencies_crypto_browserify:"^3.12.0",npm_package_config_commitizen_path:"./node_modules/cz-conventional-changelog",npm_package_dependencies_vite:"^4.5.0",npm_package_dependencies_puppeteer:"13.5.0",npm_package_dependencies_lodash:"^4.17.21",npm_package_dependencies__web3_onboard_react:"2.9.2",npm_package_dependencies__web3_onboard_injected_wallets:"2.11.1",npm_package_devDependencies_tailwindcss_cli:"^0.1.2",npm_package_devDependencies_cypress:"^8.3.0",npm_package_devDependencies__safe_global_safe_apps_sdk:"^8.1.0",npm_package_dependencies_bnc_onboard:"1.39.1",npm_package_dependencies__lottiefiles_react_lottie_player:"^3.5.3",npm_package_devDependencies_react_app_rewired:"^2.2.1",npm_package_devDependencies_polished:"^4.1.3",npm_package_devDependencies_i18next_browser_languagedetector:"^6.1.2",npm_package_devDependencies__emotion_react:"^11.10.5",npm_config_version_git_tag:"true",npm_config_version_git_sign:"",npm_package_license:"GPL-3.0-or-later",npm_package_dependencies_immutability_helper:"^3.1.1",npm_package_devDependencies_start_server_and_test:"^1.11.0",npm_config_strict_ssl:"true",npm_package_scripts_serve_media:"REACT_APP_PAGE=media tsx ./src/utils/serve",npm_package_dependencies_vite_plugin_static_copy:"^0.17.0",npm_package_dependencies_commander:"^12.1.0",npm_package_devDependencies_tsx:"^4.1.1",npm_package_devDependencies_netlify_cli:"~6.9.6",PWD:"/home/runner/work/app/app",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_dependencies_object_hash:"^3.0.0",npm_package_dependencies_rebass:"^4.0.7",npm_package_dependencies__naerth_commander_autocomplete:"^0.0.9",npm_package_dependencies__mui_x_charts:"^7.7.0",npm_package_devDependencies_serve:"^12.0.0",npm_package_devDependencies_react_ga:"^3.3.0",npm_package_devDependencies_postcss:"^8.4.31",npm_package_devDependencies_https_browserify:"^1.0.0",npm_package_devDependencies__mui_material:"^5.5.3",npm_package_devDependencies__actions_core:"^1.6.0",npm_config_save_prefix:"^",npm_config_ignore_optional:"",REACT_APP_ANGLE_API:"https://api.angle.money",npm_package_devDependencies_rollup_plugin_visualizer:"^5.9.2",npm_package_devDependencies_react_redux:"^7.2.6",npm_package_scripts_check_bundle:"vite-bundle-visualizer --open",npm_package_scripts_check_lint:"biome lint ./src",npm_package_dependencies_react_use:"^17.4.0",npm_package_devDependencies__tailwindcss_line_clamp:"^0.4.2",INIT_CWD:"/home/runner/work/app/app",npm_package_devDependencies_react_dom:"^18.1.0",NODE_ENV:"production"}.ENV;let t,i;p!=="production"?t=Y:t=$;const g=H[a];return i=t+g+"/prod/gn",new O({cache:new M,link:new q({fetch,uri:i})})},W=b.gql`
  query getContractData($address: ID!, $timestamp: BigInt) {
    contracts(where: { usr: $address, bgn_lt: $timestamp }) {
      id
      bgn
      clf
      fin
      mgr
      res
      rxd
      tot
    }
  }
`,ce=b.gql`
  query getContractData($timestamp: BigInt) {
    contracts(where: { bgn_lt: $timestamp }) {
      id
      bgn
      clf
      fin
      mgr
      res
      rxd
      tot
    }
  }
`,te=()=>{var x;const{chainId:a,address:p,provider:t}=j(),{execTransactions:i}=z(),{setContracts:g}=C(),[s,N]=l.useState(),[c,w]=l.useState(d.parse(0)),[h,f]=l.useState();return l.useEffect(()=>{try{b.request(B,W,{address:p.toLowerCase(),timestamp:D().unix().toString()}).then(e=>{var o;const r=["function unpaid(uint256) external view returns(uint256)"],k=new P(v,r,t);try{(async()=>{let m=d.from(0);for(const[E,I]of e==null?void 0:e.contracts.entries()){const y=await k.unpaid(I.id);m=m.add(d.from(y.toString())),e.contracts[E].claimable=d.from(y.toString())}return m})().then(m=>w(m))}catch{}((o=e==null?void 0:e.contracts)==null?void 0:o.length)>0&&N(e==null?void 0:e.contracts)})}catch{}},[p,t]),l.useEffect(()=>{var e;g([{address:v,name:"Vesting Contract",chainId:a},{address:(e=T(a))==null?void 0:e.ANGLE,name:"ANGLE",chainId:a}])},[a,g]),n.jsx("div",{className:"container",children:n.jsxs("div",{className:"mx-auto md:w-11/12 lg:w-1/2 xl:w-2/5",children:[n.jsx(V,{chainId:a,headerLogoAlt:"Vesting",headerLogo:S,logoClassName:"md:w-24",title:"Vesting",description:"Manage your ANGLE vesting contract and redeem your vested tokens."}),n.jsxs("section",{className:"mt-6 flex w-full flex-col rounded-md bg-black-700",children:[n.jsxs("div",{className:"flex flex-col items-center justify-around gap-2 p-6",children:[n.jsx(L,{token:"ANGLE"}),n.jsxs("p",{className:"w-full text-center font-bold dark:text-peach-500",children:[p?!s||(s==null?void 0:s.length)===0?"Sorry, no vesting contract found for your account.":`Welcome! You have ${s==null?void 0:s.length} ongoing vesting contract.`:"Welcome! Connect your account to see your vesting contracts."," "]}),n.jsx("p",{className:"w-full text-center",children:p&&(s==null?void 0:s.length)>0&&n.jsxs("span",{children:["You can currently claim"," ",n.jsxs("span",{className:"font-bold dark:text-peach-500",children:[" ",u(c==null?void 0:c.toNumber())," ANGLE"]})," ","over a total of"," ",n.jsx("span",{className:"font-bold dark:text-peach-500",children:u((x=d.from(s.reduce((e,r)=>e.add(d.from(r.tot)),d.parse(0))))==null?void 0:x.toNumber())}),", and your contract lasts until"," ",n.jsx("span",{className:"font-bold",children:D.unix(s[0].fin).toDate().toDateString()}),"."]})})]}),n.jsx(U,{className:"w-1/2"}),n.jsx("div",{className:"p-6",children:(s==null?void 0:s.length)>0&&s.map(e=>{var r,k;return n.jsxs("div",{className:"flex w-full items-center justify-between border-b py-4 first:pt-0 last:border-none last:pb-0 dark:border-black-200",children:[n.jsx(A,{type:"button",look:"primary",disabled:!c||(c==null?void 0:c.eq(0)),onClick:async o=>{await i.vest(o,v,e==null?void 0:e.id)},children:`Claim contract ${Number.parseInt(e==null?void 0:e.id)} (${u((r=e.claimable)==null?void 0:r.toNumber())} ANGLE)`}),(c==null?void 0:c.gt(0))&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(G.Int256,{state:[h,f],placeholder:"Amount to Claim",size:"s",suffix:n.jsx(R,{onClick:()=>f(c),size:"x-small",look:"secondary",children:"MAX"})}),n.jsx(A,{type:"button",look:"primary",disabled:!c||(c==null?void 0:c.eq(0)),onClick:async o=>{await i.partialVest(o,v,h,e==null?void 0:e.id)},children:`Partial claim Contract #${Number.parseInt(e==null?void 0:e.id)} (${u((k=e.claimable)==null?void 0:k.toNumber())} ANGLE)`})]})})]})})})]})]})})};export{ce as A,te as P,_e as a,ae as b,ne as c,ee as d,se as g,pe as u};
